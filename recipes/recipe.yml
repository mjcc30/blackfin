# Le nom de votre image
name: blackfin
description: The immutable cybersecurity workstation based on Bluefin.
base-image: ghcr.io/ublue-os/bluefin-dx
image-version: latest

modules:
  - type: files
    files:
      - source: usr
        destination: /usr
      - source: etc
        destination: /etc

  - type: rpm-ostree
    install:
      # --- Outils Réseau & Hardware de base ---
      - nmap
      - nmap-ncat
      - wireshark-cli
      - tcpdump
      - aircrack-ng
      - pciutils
      - usbutils
      - ethtool
      - macchanger
      - net-tools
      
      # --- Outils Systèmes ---
      - pipx
      - uv # Requis pour Sensei
      - distrobox
      - podman-compose # Requis pour SysReptor
      - bat
      - htop
      - tmux
      - zsh
      - fastfetch
      - dconf-editor
      - jq # Pour parser le JSON de l'API IA
      - gnome-shell-extension-user-theme # Indispensable pour le Shell Theme
      - gnome-tweaks

  # --- Polices pour le terminal et l'UI ---
  - type: fonts
    fonts:
      nerd-fonts:
        - JetBrainsMono
        - Hack
        - Meslo

  # --- Installation du Thème Catppuccin ---
  - type: script
    scripts:
      # - install-catppuccin.sh # Désactivé car l'URL du zip est instable
      - install-sensei.sh # Installation de l'IA Mentor

  - type: default-flatpaks@v1
    notify: false
    system:
      install:
        # --- GUI Security Tools ---
        - org.zaproxy.ZAP
        - org.ghidra_sre.Ghidra
        - net.portswigger.BurpSuiteCommunity
        - org.wireshark.Wireshark

  - type: systemd
    system:
      enabled:
        - podman.socket
